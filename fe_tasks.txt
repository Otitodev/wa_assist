Below is a **SaaS-grade Next.js dashboard ticket set** optimized for **speed** using **shadcn/ui blocks + components**, with a **HybridFlow design system** that borrows cues from **official WhatsApp** (greens, neutrals, density) but does **not** look generic.

---

# Design System (HybridFlow UI) — Direction

## Visual Principles

* **WhatsApp-inspired, not WhatsApp-cloned**: familiar green accents, clean surfaces, high readability.
* **Operational product feel**: dashboard-first, metrics, audit trails, state, reliability.
* **Fast scanning**: strong hierarchy, compact tables, crisp status badges, minimal decoration.
* **Trust cues**: clear system state (“Active / Paused”), last event time, webhook health.

## Tokens (CSS variables via shadcn theme)

**Core**

* `--brand`: deep “WhatsApp-adjacent” green (primary)
* `--brand-2`: teal/emerald highlight (secondary)
* `--surface`: slightly tinted neutral background (not pure gray)
* `--border`: subtle borders, consistent
* `--success / --warning / --danger`: used for state + alerts

**Components style rules**

* Buttons: primary = brand green, secondary = neutral, destructive = red
* Badges: filled for “Active”, outlined for “Paused”
* Tables: compact density, sticky header
* Forms: left-aligned labels, helper text, inline validation

---

# EPIC A — Frontend Foundation (Next.js + shadcn)

### UI-001 — Next.js App Bootstrap

**Type:** Task | **Priority:** Critical
**Scope**

* Next.js (App Router), TS, Tailwind
* shadcn/ui setup
* eslint/prettier, absolute imports

**Acceptance Criteria**

* App runs locally and builds in CI
* shadcn components installed and usable

---

### UI-002 — Global Layout Shell

**Type:** Feature | **Priority:** Critical
**Scope**

* App shell: sidebar + topbar + content area
* Responsive behavior:

  * Desktop: fixed sidebar
  * Mobile: sheet/drawer sidebar
* Global loading and error boundaries

**Acceptance Criteria**

* All pages use shared shell
* Sidebar collapses and persists state (localStorage)

---

### UI-003 — Design Tokens + Theme Pack (“HybridFlow”)

**Type:** Feature | **Priority:** High
**Scope**

* Create `theme.css` with CSS variables
* Light + Dark modes (toggle)
* Typography scale + spacing scale

**Acceptance Criteria**

* All shadcn components reflect theme
* Brand is visible but not overpowering
* Dark mode looks intentional (not inverted gray)

---

### UI-004 — Component Inventory Page (Internal)

**Type:** Task | **Priority:** Medium
**Scope**

* `/design-system` route showcasing:

  * buttons, inputs, badges, tables, dialogs, charts placeholders

**Acceptance Criteria**

* One page to validate UI consistency quickly

---

# EPIC B — Auth & Tenant Context

### UI-010 — Authentication UI (MVP)

**Type:** Feature | **Priority:** High
**Scope**

* Sign-in page (email/password or magic link depending on backend)
* Session persistence
* Logged-out route guard

**Acceptance Criteria**

* Unauthed users redirected to `/login`
* Authed users reach dashboard

---

### UI-011 — Tenant Switcher (Multi-tenant UX)

**Type:** Feature | **Priority:** High
**Scope**

* Tenant switch dropdown in topbar
* Loads tenant list for user
* Updates active tenant context

**Acceptance Criteria**

* Switching tenant updates data across pages
* Active tenant persisted

---

# EPIC C — Navigation & Information Architecture

### UI-020 — Route Map + Sidebar Nav

**Type:** Feature | **Priority:** High
**Routes**

* `/dashboard` (overview)
* `/instances`
* `/sessions`
* `/inbox` (optional MVP, can be later)
* `/knowledge`
* `/alerts`
* `/settings`

**Acceptance Criteria**

* Active route highlight
* Icons consistent (lucide-react)

---

# EPIC D — Core Pages (SaaS-ready)

## 1) Dashboard Overview

### UI-100 — Dashboard Overview Page

**Type:** Feature | **Priority:** Critical
**Widgets (shadcn blocks style)**

* KPI cards: Active Chats, Paused Chats, AI Replies Today, Interference Rate
* Health card: Webhook status + last event timestamp
* Recent activity feed (last 20 events)

**Acceptance Criteria**

* Data loads fast (skeleton states)
* Status badges match backend states exactly

---

## 2) Instances

### UI-110 — Instances List Page

**Type:** Feature | **Priority:** Critical
**Scope**

* Table: instanceName, status, number, lastSeen, webhook configured
* Actions: View, Reconnect (if supported), Disable (future)

**Acceptance Criteria**

* Sorting by status, lastSeen
* Clear empty state: “No instances yet”

---

### UI-111 — Instance Detail Page

**Type:** Feature | **Priority:** High
**Scope**

* Header: Instance name + status badge
* Tabs:

  * Overview
  * Webhooks
  * Logs (events)
* “Copy webhook URL” button
* “Test webhook” button (calls backend test endpoint)

**Acceptance Criteria**

* Shows last 50 events for that instance
* Test webhook returns success/fail visibly

---

## 3) Sessions (the “Invisible Mute” operational surface)

### UI-120 — Sessions List Page

**Type:** Feature | **Priority:** Critical
**Scope**

* Table: remoteJid/chatId, contact name (if available), state (Active/Paused), last message, last human, last AI, SLA indicator
* Filters:

  * state: Active/Paused
  * instance
  * time range
* Search by number

**Acceptance Criteria**

* “Paused” sessions visually distinct
* Row click opens session detail

---

### UI-121 — Session Detail Page (State Machine View)

**Type:** Feature | **Priority:** Critical
**Scope**

* Session header: state badge + “Resume” / “Pause” controls
* Timeline component:

  * inbound messages
  * outbound AI
  * pause/resume events
* Debug panel:

  * session JSON (read-only)
  * last webhook payload link (if stored)

**Acceptance Criteria**

* Manual resume works and reflects instantly
* Timeline renders correctly for mixed events

---

## 4) Knowledge Base (Persona)

### UI-130 — Knowledge Base Upload Page

**Type:** Feature | **Priority:** High
**Scope**

* Upload PDF/DOC/TXT (MVP: file + plain text)
* Prompt/persona editor:

  * Tone
  * Business rules
  * “Do/Don’t” list
* “Save & Re-index” action

**Acceptance Criteria**

* Upload validation (size/type)
* Clear “indexing” progress state
* Saved version history (v1, v2) at least basic list

---

## 5) Alerts (Proactive notifications)

### UI-140 — Alerts Rules Page

**Type:** Feature | **Priority:** Medium
**Scope**

* Rules builder (MVP):

  * Sentiment threshold
  * Keyword triggers (“help”, “refund”, etc.)
  * Escalation: Telegram / Email (later)
* Rules list with enable/disable

**Acceptance Criteria**

* Create/edit/delete rules
* Enabled rules visually indicated

---

## 6) Settings

### UI-150 — Settings Page (Tenant)

**Type:** Feature | **Priority:** High
**Sections**

* WhatsApp / Evolution config (read-only first)
* Webhook endpoint status
* API keys management UI (masked)
* Team members (later)

**Acceptance Criteria**

* Secrets masked by default
* Copy-to-clipboard actions available

---

# EPIC E — Reusable UI Components (shadcn-first)

### UI-200 — Status Badge System

**Type:** Component | **Priority:** High
**Badges**

* Active (brand)
* Paused (warning)
* Error (destructive)
* Connecting (neutral)

**Acceptance Criteria**

* One component used everywhere, no duplicate styles

---

### UI-201 — Data Table Kit (Compact)

**Type:** Component | **Priority:** High
**Scope**

* TanStack Table with shadcn styling
* Column visibility toggle
* Sticky header
* Skeleton rows

**Acceptance Criteria**

* Used by Instances + Sessions pages

---

### UI-202 — Timeline / Event Feed Component

**Type:** Component | **Priority:** High
**Scope**

* Event item types: inbound, outbound, state change, errors
* Icon + timestamp + payload preview
* Expand/collapse details

**Acceptance Criteria**

* Handles 500+ events without UI lag (virtualize if needed)

---

### UI-203 — “Health Pill” Component

**Type:** Component | **Priority:** Medium
**Scope**

* Webhook reachable
* Last event age
* Error rate (future)

---

# EPIC F — API Contract (Frontend ↔ FastAPI)

### UI-300 — API Client + Types

**Type:** Task | **Priority:** Critical
**Scope**

* Typed client (fetch wrapper)
* Zod validation for responses
* Central error handling

**Acceptance Criteria**

* All pages use the same client
* Consistent error UI

---

### UI-301 — API Endpoints Needed (Contract Draft)

**Type:** Spec | **Priority:** Critical

**Tenant**

* `GET /api/tenants` → list
* `GET /api/tenants/:tenantId` → detail

**Instances**

* `GET /api/instances?tenantId=...`
* `GET /api/instances/:instanceName?tenantId=...`
* `POST /api/instances/:instanceName/test-webhook`

**Sessions**

* `GET /api/sessions?tenantId=&instance=&state=&q=&page=`
* `GET /api/sessions/:sessionId?tenantId=...`
* `POST /api/sessions/:sessionId/pause`
* `POST /api/sessions/:sessionId/resume`

**Events**

* `GET /api/events?tenantId=&instance=&sessionId=&limit=`

**Knowledge**

* `POST /api/knowledge/upload`
* `PUT /api/knowledge/prompt`
* `GET /api/knowledge/versions`

**Alerts**

* `GET/POST/PUT/DELETE /api/alerts-rules`

**Acceptance Criteria**

* Backend agrees these shapes before UI wiring begins

---

# EPIC G — Polished UX (Professional SaaS feel)

### UI-400 — Empty States & Onboarding CTAs

**Type:** Feature | **Priority:** High
**Scope**

* If no instance: show “Connect WhatsApp” CTA
* If no KB: show “Upload knowledge” CTA
* If paused sessions exist: show “Review paused chats” CTA

**Acceptance Criteria**

* No dead ends; every empty state has next action

---

### UI-401 — Notifications / Toast Policy

**Type:** Task | **Priority:** Medium
**Scope**

* Use shadcn toast
* Success, warning, error patterns standardized

---

### UI-402 — Loading Strategy (Skeleton-first)

**Type:** Task | **Priority:** Medium
**Scope**

* Skeleton cards, tables, timeline
* Prevent layout shifts

---

# Recommended Build Order (Fastest to a good-looking MVP)

1. UI-001, UI-002, UI-003
2. UI-200, UI-201
3. UI-100 (Overview)
4. UI-110 + UI-111 (Instances)
5. UI-120 + UI-121 + UI-202 (Sessions + timeline)
6. UI-130 (Knowledge)
7. UI-150 (Settings)
8. UI-140 (Alerts)

---


